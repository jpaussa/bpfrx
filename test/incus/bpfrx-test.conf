security {
    zones {
        security-zone trust {
            interfaces { enp6s0; }
            host-inbound-traffic {
                system-services { ssh; ping; }
            }
        }
        security-zone untrust {
            interfaces { enp7s0; }
            host-inbound-traffic {
                system-services { ping; }
            }
        }
        security-zone dmz {
            interfaces { enp8s0; }
            host-inbound-traffic {
                system-services { ssh; ping; }
            }
        }
    }
    policies {
        from-zone trust to-zone untrust {
            policy allow-all {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then { permit; log { session-init; session-close; } }
            }
        }
        from-zone trust to-zone dmz {
            policy allow-all {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then { permit; }
            }
        }
        from-zone untrust to-zone dmz {
            policy allow-web {
                match {
                    source-address any;
                    destination-address any;
                    application junos-http;
                }
                then { permit; }
            }
        }
    }
    nat {
        source {
            rule-set trust-to-untrust {
                from zone trust;
                to zone untrust;
                rule snat {
                    match { source-address 0.0.0.0/0; }
                    then { source-nat { interface; } }
                }
            }
        }
    }
    screen {
        ids-option untrust-screen {
            tcp { land; syn-flood; }
            icmp { ping-death; }
            ip { source-route-option; }
        }
    }
}
routing-options {
    static {
        route 0.0.0.0/0 { next-hop 10.0.2.1; }
        route 10.0.30.0/24 { next-hop 10.0.30.1; }
        route 10.0.40.0/24 { next-hop 10.0.40.1; }
    }
}
